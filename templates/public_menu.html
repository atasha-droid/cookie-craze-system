{% load static %}
<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Menu — Cookie Craze</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link rel="icon" href="{% static 'images/cookie-craze-logo.png' %}">
  <style>
    :root { --primary:#8B4513; --primary-600:#7a3e11; --primary-100:#f8f1e9; --bg:#f8f6f3; --bg-secondary:#ffffff; --text-primary:#2a2a2a; --text-secondary:#666; --border:#e6e2dd; --accent:#C07A3F; --shadow: 0 4px 12px rgba(139,69,19,0.08); --radius:16px; }
    [data-theme="dark"] { --bg:#141414; --bg-secondary:#1c1c1c; --text-primary:#e8e8e8; --text-secondary:#b5b5b5; --border:#2a2a2a; --primary-100:#2a1e14; }
    *{box-sizing:border-box} html,body{margin:0;padding:0;font-family:Inter,system-ui,Segoe UI,Roboto,Arial;background:var(--bg);color:var(--text-primary);line-height:1.6}
    .container{max-width:1200px;margin:0 auto;padding:0 20px}
    .site-header{position:sticky;top:0;z-index:50;background:var(--bg-secondary);border-bottom:1px solid var(--border);backdrop-filter:blur(10px)}
    .nav{display:flex;align-items:center;justify-content:space-between;height:70px}
    .brand{display:flex;align-items:center;gap:12px;font-weight:700;color:var(--primary);text-decoration:none;font-size:1.25rem}
    .brand img{width:40px;height:40px;object-fit:contain}
    .nav-center{display:flex;gap:24px;align-items:center}
    .nav-center a{text-decoration:none;color:var(--text-primary);font-weight:500;font-size:1rem;padding:8px 16px;border-radius:10px;transition:all .3s ease}
    .nav-center a:hover{background:var(--primary-100);color:var(--primary)}
    .nav-right{display:flex;gap:12px;align-items:center}
    .btn{display:inline-flex;align-items:center;gap:8px;border-radius:12px;padding:12px 24px;font-weight:600;text-decoration:none;border:2px solid transparent;transition:all .3s ease;font-size:.95rem}
    .btn-outline{border-color:var(--primary);color:var(--primary);background:transparent}
    .btn-outline:hover{background:var(--primary-100);transform:translateY(-2px)}
    .btn-primary{background:var(--primary);color:#fff;box-shadow:var(--shadow)}
    .btn-primary:hover{background:var(--primary-600);transform:translateY(-2px);box-shadow:0 6px 20px rgba(139,69,19,.15)}
    .hamburger{display:none;border:2px solid var(--border);border-radius:10px;width:44px;height:40px;align-items:center;justify-content:center;cursor:pointer;background:transparent;transition:all .3s ease}
    .hamburger:hover{border-color:var(--primary)}
    .mobile-menu{display:none;background:var(--bg-secondary);border-bottom:1px solid var(--border);animation:slideDown .3s ease}
    @keyframes slideDown{from{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}
    .mobile-menu .links{display:grid;gap:8px;padding:16px 20px 20px}
    .mobile-menu a{text-decoration:none;color:var(--text-primary);font-weight:600;padding:12px 16px;border-radius:10px;transition:all .3s ease}
    .mobile-menu a:hover{background:var(--primary-100);color:var(--primary)}
    .theme-toggle{width:44px;height:44px;border-radius:12px;border:2px solid var(--border);background:transparent;display:inline-flex;align-items:center;justify-content:center;cursor:pointer;transition:all .3s ease}
    .theme-toggle:hover{border-color:var(--primary)}

    /* Filter bar */
    .toolbar{background:var(--bg-secondary);border-bottom:1px solid var(--border)}
    .toolbar-inner{display:flex;gap:12px;align-items:center;justify-content:space-between;padding:14px 0;flex-wrap:wrap}
    .search{display:flex;align-items:center;gap:8px;background:var(--bg);border:1px solid var(--border);border-radius:10px;padding:8px 10px}
    .search input{border:none;background:transparent;outline:none;color:var(--text-primary);min-width:220px}
    .chips{display:flex;gap:8px;flex-wrap:wrap}
    .chip{padding:8px 12px;border:1px solid var(--border);border-radius:999px;background:#fff7ef;color:var(--primary);cursor:pointer;text-decoration:none;font-weight:600}

    /* Grid */
    .grid{display:grid;grid-template-columns:repeat(4,1fr);gap:16px;padding:20px 0 40px}
    .card{background:var(--bg-secondary);border:1px solid var(--border);border-radius:14px;overflow:hidden;display:flex;flex-direction:column}
    .card img{width:100%;height:170px;object-fit:cover}
    .card-body{padding:14px;display:grid;gap:6px}
    .card-title{font-weight:700}
    .price{color:var(--primary);font-weight:700}
    .card-actions{margin-top:6px}

    .site-footer{background:var(--bg-secondary);border-top:1px solid var(--border);margin-top:40px}
    .footer-inner{padding:40px 0 24px}
    .footer-top{display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:20px;margin-bottom:30px}
    .footer-links{display:flex;gap:20px;flex-wrap:wrap}
    .footer-links a{text-decoration:none;color:var(--text-primary);font-weight:500;font-size:1rem;transition:color .3s ease}
    .footer-links a:hover{color:var(--primary)}
    .socials{display:flex;gap:12px}
    .socials a{width:44px;height:44px;display:inline-flex;align-items:center;justify-content:center;background:var(--primary-100);color:var(--primary);border-radius:12px;text-decoration:none;transition:all .3s ease}
    .socials a:hover{background:var(--primary);color:#fff;transform:translateY(-2px)}

    @media (max-width:1024px){.grid{grid-template-columns:repeat(3,1fr)}}
    @media (max-width:768px){.nav-center,.nav-right{display:none}.hamburger{display:inline-flex}.grid{grid-template-columns:repeat(2,1fr)}.search input{min-width:140px}}
    @media (max-width:520px){.grid{grid-template-columns:1fr}}
    @media (max-width:420px){
      .container{padding:0 14px}
      .nav{height:60px}
      .brand img{width:32px;height:32px}
      .btn{padding:10px 16px;font-size:.9rem;border-radius:10px}
      .nav-center a{font-size:.95rem;padding:6px 12px}
      .toolbar-inner{gap:10px;padding:12px 0}
      .search{padding:6px 8px}
      .search input{min-width:120px;font-size:.95rem}
      .chips{gap:6px}
      .chip{padding:6px 10px;font-size:.9rem}
      .grid{grid-template-columns:1fr;gap:14px}
      .card img{height:160px}
      .card-body{padding:12px}
      .card-title{font-size:1rem}
      .price{font-size:1rem}
    }
  </style>
</head>
<body>
  <header class="site-header">
    <div class="container">
      <div class="nav">
        <a href="/" class="brand"><img src="{% static 'images/cookie-craze-logo.png' %}" alt="Logo"><span>Cookie Craze</span></a>
        <nav class="nav-center">
          <a href="/">Home</a>
          <a href="/menu/">Menu</a>
          <a href="/about/">About Us</a>
          <a href="/contact/">Contact</a>
        </nav>
        <div class="nav-right">
          <button class="theme-toggle" id="themeToggle" aria-label="Toggle theme"><i class="fas fa-moon"></i></button>
          {% if user.is_authenticated %}
            {% if user.is_superuser or user.profile.user_type == 'staff' or user.profile.user_type == 'admin' %}
              <a href="{% url 'dashboard' %}" class="btn btn-primary"><i class="fas fa-tachometer-alt"></i> Dashboard</a>
            {% elif user.profile.user_type == 'customer' %}
              <a href="{% url 'customer_dashboard' %}" class="btn btn-primary"><i class="fas fa-user"></i> My Dashboard</a>
            {% else %}
              <a href="{% url 'dashboard' %}" class="btn btn-primary"><i class="fas fa-tachometer-alt"></i> Dashboard</a>
            {% endif %}
          {% else %}
            <a href="/app/login/" class="btn btn-outline"><i class="fas fa-sign-in-alt"></i> Login</a>
            <a href="{% url 'customer_register' %}" class="btn btn-primary"><i class="fas fa-user-plus"></i> Register</a>
          {% endif %}
        </div>
        <button class="hamburger" id="hamburger" aria-label="Open Menu"><i class="fas fa-bars"></i></button>
      </div>
    </div>
    <div class="mobile-menu" id="mobileMenu">
      <div class="links">
        <a href="/">Home</a>
        <a href="/menu/">Menu</a>
        <a href="/about/">About Us</a>
        <a href="/contact/">Contact</a>
        {% if user.is_authenticated %}
          {% if user.is_superuser or user.profile.user_type == 'staff' or user.profile.user_type == 'admin' %}
            <a href="{% url 'dashboard' %}"><i class="fas fa-tachometer-alt"></i> Dashboard</a>
          {% elif user.profile.user_type == 'customer' %}
            <a href="{% url 'customer_dashboard' %}"><i class="fas fa-user"></i> My Dashboard</a>
          {% else %}
            <a href="{% url 'dashboard' %}"><i class="fas fa-tachometer-alt"></i> Dashboard</a>
          {% endif %}
        {% else %}
          <a href="/app/login/"><i class="fas fa-sign-in-alt"></i> Login</a>
          <a href="{% url 'customer_register' %}"><i class="fas fa-user-plus"></i> Register</a>
        {% endif %}
      </div>
    </div>
  </header>

  <section class="toolbar">
    <div class="container toolbar-inner">
      <form method="get" class="search" action="/menu/">
        <i class="fas fa-search" style="color:var(--text-secondary)"></i>
        <input type="text" name="q" value="{{ q }}" placeholder="Search cookies...">
      </form>
      <div class="chips">
        <a href="/menu/" class="chip">All</a>
        <a href="/menu/?q=chocolate" class="chip">Chocolate-Based</a>
        <a href="/menu/?q=premium" class="chip">Premium</a>
        <a href="/menu/?q=bestseller" class="chip">Bestsellers</a>
        <a href="/menu/?q=seasonal" class="chip">Seasonal</a>
      </div>
    </div>
  </section>

  <main class="container">
    <div class="grid">
      {% for cookie in cookies %}
      <div class="card">
        <img src="{% if cookie.image %}{{ cookie.image.url }}{% else %}{% static 'images/cookie-hero.jpg' %}{% endif %}" alt="{{ cookie.name }}">
        <div class="card-body">
          <div class="card-title">{{ cookie.name }}</div>
          <div class="price">₱{{ cookie.price }}</div>
          <div class="card-actions">
            {% if user.is_authenticated and user.profile.user_type == 'customer' %}
              <a href="{% url 'place_order' %}" class="btn btn-primary"><i class="fas fa-cart-plus"></i> Add to Cart</a>
            {% else %}
              <a href="/app/login/" class="btn btn-outline"><i class="fas fa-cart-plus"></i> Add to Cart</a>
            {% endif %}
          </div>
        </div>
      </div>
      {% empty %}
      <p style="grid-column:1/-1;color:var(--text-secondary)">No products found.</p>
      {% endfor %}
    </div>
  </main>

  <footer class="site-footer">
    <div class="container footer-inner">
      <div class="footer-top">
               <div class="socials">
          <a href="#" aria-label="Facebook"><i class="fab fa-facebook-f"></i></a>
          <a href="#" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
          <a href="#" aria-label="Twitter"><i class="fab fa-x-twitter"></i></a>
        </div>
      </div>
      <div style="color:var(--text-secondary);font-size:.85rem;display:flex;justify-content:space-between;gap:10px;flex-wrap:wrap">
        <span>© 2025 Cookie Craze. All rights reserved.</span>
        <span>Powered by Cookie Craze Sales System</span>
      </div>
    </div>
  </footer>

  <script>
    const hamburger = document.getElementById('hamburger');
    const mobileMenu = document.getElementById('mobileMenu');
    hamburger.addEventListener('click', () => {
      mobileMenu.style.display = mobileMenu.style.display === 'block' ? 'none' : 'block';
    });
    document.addEventListener('click', (e) => {
      if (!mobileMenu.contains(e.target) && !hamburger.contains(e.target)) mobileMenu.style.display = 'none';
    });

    const themeToggle = document.getElementById('themeToggle');
    const root = document.documentElement;
    const saved = localStorage.getItem('theme');
    if (saved === 'dark') { root.setAttribute('data-theme','dark'); themeToggle.innerHTML = '<i class="fas fa-sun"></i>'; }
    themeToggle.addEventListener('click', () => {
      const next = root.getAttribute('data-theme') === 'dark' ? 'light' : 'dark';
      root.setAttribute('data-theme', next);
      localStorage.setItem('theme', next);
      themeToggle.innerHTML = next === 'dark' ? '<i class="fas fa-sun"></i>' : '<i class="fas fa-moon"></i>';
    });
  </script>
</body>
</html>
