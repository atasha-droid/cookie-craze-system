{% load static %}
<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Home - Cookie Craze</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <link rel="icon" href="{% static 'images/cookie-craze-logo.png' %}">
  <style>
    :root {
      --primary: #8B4513;
      --primary-600: #7a3e11;
      --primary-100: #f8f1e9;
      --bg: #f8f6f3;
      --bg-secondary: #ffffff;
      --text-primary: #2a2a2a;
      --text-secondary: #666666;
      --border: #e6e2dd;
      --accent: #C07A3F;
      --shadow: 0 4px 12px rgba(139, 69, 19, 0.08);
      --radius: 16px;
    }
    [data-theme="dark"] {
      --bg: #141414;
      --bg-secondary: #1c1c1c;
      --text-primary: #e8e8e8;
      --text-secondary: #b5b5b5;
      --border: #2a2a2a;
      --primary-100: #2a1e14;
    }
    * { box-sizing: border-box; }
    html, body { margin: 0; padding: 0; font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; background: var(--bg); color: var(--text-primary); line-height: 1.6; }

    /* Global centered messages */
    .global-messages { display: flex; justify-content: center; padding: 16px 0; }
    .message-banner { max-width: 760px; width: calc(100% - 28px); margin: 0 auto; border-radius: 14px; border: 1px solid var(--border); box-shadow: var(--shadow); padding: 14px 18px; display: flex; align-items: center; gap: 10px; justify-content: center; text-align: center; font-weight: 600; }
    .message-success { background: #e8f6ee; border-color: #bde5c8; color: #166534; }
    .message-error { background: #fdeaea; border-color: #f5bcbc; color: #7f1d1d; }
    .message-info { background: #eef2ff; border-color: #c7d2fe; color: #1e3a8a; }
    [data-theme="dark"] .message-success { background: rgba(34,197,94,0.12); border-color: rgba(34,197,94,0.35); color: #86efac; }
    [data-theme="dark"] .message-error { background: rgba(239,68,68,0.12); border-color: rgba(239,68,68,0.35); color: #fca5a5; }
    [data-theme="dark"] .message-info { background: rgba(99,102,241,0.12); border-color: rgba(99,102,241,0.35); color: #c7d2fe; }
    .message-banner { transition: opacity .3s ease, transform .3s ease; }

    /* Header */
    .site-header { position: sticky; top: 0; z-index: 50; background: var(--bg-secondary); border-bottom: 1px solid var(--border); backdrop-filter: blur(10px); }
    .container { max-width: 1200px; margin: 0 auto; padding: 0 20px; }
    .nav { display: flex; align-items: center; justify-content: space-between; height: 70px; }
    .brand { display: flex; align-items: center; gap: 12px; font-weight: 700; color: var(--primary); text-decoration: none; font-size: 1.25rem; }
    .brand img { width: 40px; height: 40px; object-fit: contain; }

    .nav-center { display: flex; gap: 24px; align-items: center; }
    .nav-center a { text-decoration: none; color: var(--text-primary); font-weight: 500; font-size: 1rem; padding: 8px 16px; border-radius: 10px; transition: all 0.3s ease; }
    .nav-center a:hover { background: var(--primary-100); color: var(--primary); }

    .nav-right { display: flex; gap: 12px; align-items: center; }
    .theme-toggle { width: 44px; height: 44px; border-radius: 12px; border: 2px solid var(--border); background: transparent; display: inline-flex; align-items: center; justify-content: center; cursor: pointer; transition: all 0.3s ease; }
    .theme-toggle:hover { border-color: var(--primary); }
    .theme-toggle i { color: var(--text-primary); }
    .btn { display: inline-flex; align-items: center; justify-content: center; gap: 8px; border-radius: 12px; padding: 12px 24px; font-weight: 600; text-decoration: none; border: 2px solid transparent; transition: all 0.3s ease; font-size: 0.95rem; }
    .btn-outline { border-color: var(--primary); color: var(--primary); background: transparent; }
    .btn-outline:hover { background: var(--primary-100); transform: translateY(-2px); }
    .btn-primary { background: var(--primary); color: #fff; box-shadow: var(--shadow); }
    .btn-primary:hover { background: var(--primary-600); transform: translateY(-2px); box-shadow: 0 6px 20px rgba(139, 69, 19, 0.15); }

    /* Hamburger */
    .hamburger { display: none; border: 2px solid var(--border); border-radius: 10px; width: 44px; height: 40px; align-items: center; justify-content: center; cursor: pointer; background: transparent; transition: all 0.3s ease; }
    .hamburger:hover { border-color: var(--primary); }
    .hamburger i { color: var(--text-primary); }

    /* Mobile menu */
    .mobile-menu { display: none; background: var(--bg-secondary); border-bottom: 1px solid var(--border); animation: slideDown 0.3s ease; }
    @keyframes slideDown {
      from { opacity: 0; transform: translateY(-10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .mobile-menu .links { display: grid; gap: 8px; padding: 16px 20px 20px; }
    .mobile-menu a { text-decoration: none; color: var(--text-primary); font-weight: 600; padding: 12px 16px; border-radius: 10px; transition: all 0.3s ease; }
    .mobile-menu a:hover { background: var(--primary-100); color: var(--primary); }

    /* Hero */
    .hero { position: relative; background: linear-gradient(135deg, var(--primary-100) 0%, var(--bg) 100%); padding: 60px 0; overflow: hidden; }
    .hero::before { content: ''; position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: url('{% static "images/cookie-pattern.png" %}') center/cover no-repeat; opacity: 0.1; }
    .hero-inner { position: relative; padding: 40px 0; display: grid; grid-template-columns: 1.1fr 0.9fr; gap: 60px; align-items: center; }
    .hero-text h1 { font-size: 3rem; margin: 0 0 16px; color: var(--primary); line-height: 1.2; font-weight: 700; }
    .hero-text p { margin: 0 0 28px; font-size: 1.2rem; color: var(--text-secondary); font-weight: 500; }
    .hero-cta { display: flex; gap: 16px; flex-wrap: wrap; }
    .hero-img { display: flex; align-items: center; justify-content: center; position: relative; }
    .hero-img img { width: 100%; max-width: 560px; border-radius: var(--radius); box-shadow: 0 20px 40px rgba(0,0,0,.15); transform: perspective(1000px) rotateY(-5deg) rotateX(5deg); transition: transform 0.5s ease; }
    .hero-img:hover img { transform: perspective(1000px) rotateY(0) rotateX(0); }

    /* Section Headers */
    .section-header { text-align: center; margin-bottom: 50px; }
    .section-header h2 { font-size: 2.25rem; margin: 0 0 12px; color: var(--primary); font-weight: 700; }
    .section-header p { font-size: 1.1rem; color: var(--text-secondary); max-width: 600px; margin: 0 auto; }

    /* Testimonials */
    .testimonials { padding: 80px 0; background: var(--primary-100); }
    .testimonial-card { background: var(--bg-secondary); border-radius: var(--radius); padding: 40px; text-align: center; box-shadow: var(--shadow); border: 1px solid var(--border); max-width: 800px; margin: 0 auto; }
    .testimonial-text { font-size: 1.3rem; color: var(--text-secondary); font-style: italic; line-height: 1.6; margin-bottom: 24px; min-height: 80px; display: flex; align-items: center; justify-content: center; }
    .testimonial-author { color: var(--primary); font-weight: 600; font-size: 1rem; }
    .testimonial-dots { display: flex; gap: 8px; justify-content: center; margin-top: 20px; }
    .dot { width: 10px; height: 10px; border-radius: 50%; background: var(--border); transition: all 0.3s ease; cursor: pointer; }
    .dot.active { background: var(--primary); transform: scale(1.2); }

    /* Featured Products */
    .featured-products { padding: 80px 0; }
    .section-top { display: flex; align-items: center; justify-content: space-between; margin-bottom: 40px; flex-wrap: wrap; gap: 20px; }
    .section-top h2 { margin: 0; font-size: 2rem; color: var(--primary); font-weight: 700; }
    .products-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 24px; }
    .product-card { background: var(--bg-secondary); border: 1px solid var(--border); border-radius: var(--radius); padding: 24px; transition: all 0.3s ease; box-shadow: var(--shadow); }
    .product-card:hover { transform: translateY(-5px); box-shadow: 0 12px 30px rgba(139, 69, 19, 0.12); }
    .product-image { width: 100%; height: 200px; object-fit: cover; border-radius: 12px; margin-bottom: 16px; }
    .product-card h3 { margin: 0 0 8px; font-size: 1.2rem; color: var(--text-primary); }
    .product-price { font-size: 1.3rem; font-weight: 700; color: var(--primary); margin: 0 0 16px; }
    .product-card .btn { width: 100%; }

    /* Features */
    .features { padding: 80px 0; }
    .features-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 24px; }
    .feature-card { background: var(--bg-secondary); border: 1px solid var(--border); border-radius: var(--radius); padding: 32px 24px; text-align: center; transition: all 0.3s ease; box-shadow: var(--shadow); }
    .feature-card:hover { transform: translateY(-3px); box-shadow: 0 8px 25px rgba(139, 69, 19, 0.1); }
    .feature-icon { width: 70px; height: 70px; border-radius: 16px; display: inline-flex; align-items: center; justify-content: center; background: var(--primary-100); color: var(--primary); font-size: 1.8rem; margin-bottom: 20px; }
    .feature-card h3 { margin: 0 0 12px; font-size: 1.3rem; color: var(--text-primary); }
    .feature-card p { margin: 0; color: var(--text-secondary); font-size: 1rem; }

    /* Footer */
    .site-footer { background: var(--bg-secondary); border-top: 1px solid var(--border); margin-top: 40px; }
    .footer-inner { padding: 40px 0 24px; }
    .footer-top { display: flex; align-items: center; justify-content: space-between; flex-wrap: wrap; gap: 20px; margin-bottom: 30px; }
    .footer-links { display: flex; gap: 20px; flex-wrap: wrap; }
    .footer-links a { text-decoration: none; color: var(--text-primary); font-weight: 500; font-size: 1rem; transition: color 0.3s ease; }
    .footer-links a:hover { color: var(--primary); }
    .socials { display: flex; gap: 12px; }
    .socials a { width: 44px; height: 44px; display: inline-flex; align-items: center; justify-content: center; background: var(--primary-100); color: var(--primary); border-radius: 12px; text-decoration: none; transition: all 0.3s ease; }
    .socials a:hover { background: var(--primary); color: white; transform: translateY(-2px); }
    .footer-bottom { color: var(--text-secondary); font-size: 0.9rem; display: flex; align-items: center; justify-content: space-between; gap: 20px; flex-wrap: wrap; padding-top: 20px; border-top: 1px solid var(--border); }

    /* Responsive */
    @media (max-width: 1024px) {
      .hero-inner { grid-template-columns: 1fr; gap: 40px; text-align: center; }
      .hero-text h1 { font-size: 2.5rem; }
    }
    @media (max-width: 768px) {
      .nav-center { display: none; }
      .nav-right { display: none; }
      .hamburger { display: inline-flex; }
      .hero-text h1 { font-size: 2.2rem; }
      .hero-text p { font-size: 1.1rem; }
      .section-header h2 { font-size: 1.8rem; }
      .section-top { flex-direction: column; align-items: flex-start; }
      .section-top h2 { font-size: 1.6rem; }
    }
    @media (max-width: 520px) {
      .hero-cta { flex-direction: column; align-items: center; }
      .hero-cta .btn { width: 100%; max-width: 280px; }
      .hero-text h1 { font-size: 1.8rem; }
      .testimonial-card { padding: 24px; }
      .testimonial-text { font-size: 1.1rem; }
    }
    @media (max-width: 420px) {
      .container { padding: 0 14px; }
      .nav { height: 60px; }
      .brand img { width: 32px; height: 32px; }
      .nav-center a { font-size: .95rem; padding: 6px 12px; }
      .btn { padding: 10px 16px; font-size: .9rem; border-radius: 10px; }
      .hero { padding: 40px 0; }
      .hero-text h1 { font-size: 1.6rem; }
      .hero-text p { font-size: 1rem; }
      .hero-cta .btn { max-width: 260px; }
      .hero-img img { max-width: 460px; border-radius: 14px; }
      .section-header h2 { font-size: 1.6rem; }
      .products-grid { grid-template-columns: 1fr; gap: 16px; }
      .product-image { height: 180px; border-radius: 10px; }
      .product-card h3 { font-size: 1.05rem; }
      .product-price { font-size: 1.1rem; }
      .features-grid { grid-template-columns: 1fr; }
      .feature-card { padding: 24px 18px; }
      .feature-icon { width: 60px; height: 60px; font-size: 1.4rem; border-radius: 12px; }
      .testimonial-card { padding: 20px; }
      .dot { width: 8px; height: 8px; }
    }
  </style>
</head>
<body>
  <header class="site-header">
    <div class="container">
      <div class="nav">
        <a href="{% url 'public_home' %}" class="brand">
          <img src="{% static 'images/cookie-craze-logo.png' %}" alt="Cookie Craze Logo" onerror="this.style.display='none'">
          <span>Cookie Craze</span>
        </a>
        <nav class="nav-center">
          <a href="{% url 'public_home' %}">Home</a>
          <a href="/menu/">Menu</a>
          <a href="/about/">About Us</a>
          <a href="/contact/">Contact</a>
        </nav>
        <div class="nav-right">
          <button class="theme-toggle" id="themeToggle" aria-label="Toggle theme"><i class="fas fa-moon"></i></button>
          {% if user.is_authenticated %}
            {% if user.is_superuser or user.profile.user_type == 'staff' or user.profile.user_type == 'admin' %}
              <a href="{% url 'dashboard' %}" class="btn btn-primary"><i class="fas fa-tachometer-alt"></i> Dashboard</a>
            {% elif user.profile.user_type == 'customer' %}
              <a href="{% url 'customer_dashboard' %}" class="btn btn-primary"><i class="fas fa-user"></i> My Dashboard</a>
            {% else %}
              <a href="{% url 'dashboard' %}" class="btn btn-primary"><i class="fas fa-tachometer-alt"></i> Dashboard</a>
            {% endif %}
          {% else %}
            <a href="{% url 'home' %}" class="btn btn-outline"><i class="fas fa-sign-in-alt"></i> Login</a>
            <a href="{% url 'home' %}?show_register=1" class="btn btn-primary" id="registerButton">
              <i class="fas fa-user-plus"></i> Register
            </a>
          {% endif %}
        </div>
        <button class="hamburger" id="hamburger" aria-label="Open Menu"><i class="fas fa-bars"></i></button>
      </div>
    </div>
    <div class="mobile-menu" id="mobileMenu">
      <div class="links">
        <a href="{% url 'public_home' %}">Home</a>
        <a href="/menu/">Menu</a>
        <a href="/about/">About Us</a>
        <a href="/contact/">Contact</a>
        {% if user.is_authenticated %}
          {% if user.is_superuser or user.profile.user_type == 'staff' or user.profile.user_type == 'admin' %}
            <a href="{% url 'dashboard' %}"><i class="fas fa-tachometer-alt"></i> Dashboard</a>
          {% elif user.profile.user_type == 'customer' %}
            <a href="{% url 'customer_dashboard' %}"><i class="fas fa-user"></i> My Dashboard</a>
          {% else %}
            <a href="{% url 'dashboard' %}"><i class="fas fa-tachometer-alt"></i> Dashboard</a>
          {% endif %}
        {% else %}
          <a href="{% url 'home' %}"><i class="fas fa-sign-in-alt"></i> Login</a>
          <a href="{% url 'home' %}?show_register=1" id="mobileRegisterButton">
            <i class="fas fa-user-plus"></i> Register
          </a>
        {% endif %}
      </div>
    </div>
  </header>

  <main>
    {% if messages %}
    <div class="global-messages">
      {% for message in messages %}
        {% with tag=message.tags %}
          <div class="message-banner {% if 'success' in tag %}message-success{% elif 'error' in tag or 'danger' in tag %}message-error{% else %}message-info{% endif %}" role="status">
            {% if 'success' in tag %}<i class="fas fa-check-circle"></i>{% elif 'error' in tag or 'danger' in tag %}<i class="fas fa-exclamation-circle"></i>{% else %}<i class="fas fa-info-circle"></i>{% endif %}
            <span>{{ message }}</span>
          </div>
        {% endwith %}
      {% endfor %}
    </div>
    {% endif %}
    <!-- Hero -->
    <section class="hero">
      <div class="container hero-inner">
        <div class="hero-text">
          <h1>Freshly Baked Cookies Made with Love</h1>
          <p>Indulge in our artisanal cookies crafted with premium ingredients and baked daily for that perfect warm, gooey goodness.</p>
          <div class="hero-cta">
            {% if user.is_authenticated %}
              <a href="/menu/" class="btn btn-primary"><i class="fas fa-cookie-bite"></i> Order Now</a>
            {% else %}
              <a href="/menu/" class="btn btn-primary"><i class="fas fa-cookie-bite"></i> Order Now</a>
              <a href="{% url 'home' %}?show_register=1" class="btn btn-outline" id="heroRegisterButton">
                <i class="fas fa-user-plus"></i> Create an Account
              </a>
            {% endif %}
          </div>
        </div>
        <div class="hero-img">
          <img src="{% static 'images/fresh-baked-cookies.jpeg' %}" alt="Freshly baked cookies from Cookie Craze">
        </div>
      </div>
    </section>

    <!-- Features -->
    <section class="features" id="about">
      <div class="container">
        <div class="section-header">
          <h2>Why Choose Cookie Craze?</h2>
          <p>We're passionate about creating the perfect cookie experience for you</p>
        </div>
        <div class="features-grid">
          <div class="feature-card">
            <span class="feature-icon"><i class="fas fa-cookie-bite"></i></span>
            <h3>Freshly Baked Daily</h3>
            <p>Every batch is baked the same day for peak flavor and softness.</p>
          </div>
          <div class="feature-card">
            <span class="feature-icon"><i class="fas fa-seedling"></i></span>
            <h3>Premium Ingredients</h3>
            <p>We use real butter, rich chocolate, and the best local ingredients.</p>
          </div>
          <div class="feature-card">
            <span class="feature-icon"><i class="fas fa-shield-halved"></i></span>
            <h3>Secure Payments</h3>
            <p>Safe checkout with GCash, cash, and other payment options.</p>
          </div>
          <div class="feature-card">
            <span class="feature-icon"><i class="fas fa-bag-shopping"></i></span>
            <h3>Easy Pick-Up</h3>
            <p>Order online and pick up in-store at your convenience.</p>
          </div>
        </div>
      </div>
    </section>

    <!-- Featured Products -->
    <section class="featured-products">
      <div class="container">
        <div class="section-top">
          <h2>Our Best Sellers</h2>
          <a href="/menu/" class="btn btn-outline"><i class="fas fa-list"></i> View Full Menu</a>
        </div>
        <div class="products-grid">
          {% if featured_images %}
            {% for img in featured_images|slice:":8" %}
            <div class="product-card">
              <img src="{{ img }}" alt="Featured Cookie" class="product-image">
              <a href="/menu/" class="btn btn-primary"><i class="fas fa-shopping-cart"></i> Order Now</a>
            </div>
            {% endfor %}
          {% elif cookies_with_images %}
            {% for c in cookies_with_images|slice:":8" %}
            <div class="product-card">
              <img src="{{ c.image.url }}" alt="{{ c.name }}" class="product-image">
              <h3>{{ c.name }}</h3>
              {% if c.price %}<p class="product-price">₱{{ c.price }}</p>{% endif %}
              <a href="/menu/" class="btn btn-primary"><i class="fas fa-shopping-cart"></i> Order Now</a>
            </div>
            {% endfor %}
          {% else %}
            <div class="product-card">
              <img src="{% static 'images/cookie-hero.jpg' %}" alt="Featured Cookie" class="product-image">
              <a href="/menu/" class="btn btn-primary"><i class="fas fa-shopping-cart"></i> Order Now</a>
            </div>
          {% endif %}
        </div>
      </div>
    </section>

    <!-- Testimonials -->
    <section class="testimonials">
      <div class="container">
        <div class="section-header">
          <h2>What Our Customers Say</h2>
          <p>Don't just take our word for it</p>
        </div>
        <div class="testimonial-card">
          <div class="testimonial-text" id="testimonialText">"Best cookies in town! So soft and flavorful. I'm officially addicted!"</div>
          <div class="testimonial-author" id="testimonialAuthor">— Mia, Regular Customer</div>
          <div class="testimonial-dots">
            <span class="dot active" data-index="0"></span>
            <span class="dot" data-index="1"></span>
            <span class="dot" data-index="2"></span>
          </div>
        </div>
      </div>
    </section>
  </main>

  <footer class="site-footer" id="contact">
    <div class="container footer-inner">
      <div class="footer-top">
        
        <div class="socials">
          <a href="#" aria-label="Facebook"><i class="fab fa-facebook-f"></i></a>
          <a href="#" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
          <a href="#" aria-label="Twitter"><i class="fab fa-x-twitter"></i></a>
        </div>
      </div>
      <div class="footer-bottom">
        <span>© {{ now|default:2025 }} Cookie Craze. All rights reserved.</span>
        <span>Powered by Cookie Craze Sales System</span>
      </div>
    </div>
  </footer>

  <script>
    (function(){
      // Mobile menu toggle
      const hamburger = document.getElementById('hamburger');
      const mobileMenu = document.getElementById('mobileMenu');
      if (hamburger && mobileMenu) {
        hamburger.addEventListener('click', function(e){
          e.stopPropagation();
          const isOpen = mobileMenu.style.display === 'block';
          mobileMenu.style.display = isOpen ? 'none' : 'block';
        });
        document.addEventListener('click', function(e){
          if (!mobileMenu.contains(e.target) && !hamburger.contains(e.target)) {
            mobileMenu.style.display = 'none';
          }
        });
      }

      // Theme toggle
      const themeToggle = document.getElementById('themeToggle');
      const root = document.documentElement;
      if (themeToggle) {
        const saved = localStorage.getItem('theme');
        if (saved === 'dark') {
          root.setAttribute('data-theme','dark');
          themeToggle.innerHTML = '<i class="fas fa-sun"></i>';
        }
        themeToggle.addEventListener('click', function(){
          const next = root.getAttribute('data-theme') === 'dark' ? 'light' : 'dark';
          root.setAttribute('data-theme', next);
          localStorage.setItem('theme', next);
          themeToggle.innerHTML = next === 'dark' ? '<i class="fas fa-sun"></i>' : '<i class="fas fa-moon"></i>';
        });
      }

      // Testimonials rotation
      const testimonials = [
        { text: "Best cookies in town! So soft and flavorful. I'm officially addicted!", author: "— Mia, Regular Customer" },
        { text: "The quality is incredible! You can taste the premium ingredients in every bite.", author: "— Carlo, Food Enthusiast" },
        { text: "Fast pick-up and the staff is always so friendly. My weekly treat!", author: "— Jenna, Loyal Customer" }
      ];
      
      let currentTestimonial = 0;
      const testimonialText = document.getElementById('testimonialText');
      const testimonialAuthor = document.getElementById('testimonialAuthor');
      const dots = document.querySelectorAll('.dot');

      function updateTestimonial(index) {
        currentTestimonial = index;
        testimonialText.textContent = testimonials[index].text;
        testimonialAuthor.textContent = testimonials[index].author;
        
        dots.forEach((dot, i) => {
          dot.classList.toggle('active', i === index);
        });
      }

      dots.forEach(dot => {
        dot.addEventListener('click', function() {
          updateTestimonial(parseInt(this.getAttribute('data-index')));
        });
      });

      setInterval(() => {
        currentTestimonial = (currentTestimonial + 1) % testimonials.length;
        updateTestimonial(currentTestimonial);
      }, 5000);

      // Auto-dismiss success messages after 3 seconds
      const successBanners = document.querySelectorAll('.message-banner.message-success');
      successBanners.forEach((el) => {
        setTimeout(() => {
          el.style.opacity = '0';
          el.style.transform = 'translateY(-6px)';
          setTimeout(() => {
            if (el && el.parentElement) {
              el.parentElement.removeChild(el);
            }
          }, 320);
        }, 3000);
      });

      // Register button functionality - immediate redirect with loading state
      function handleRegisterClick(e) {
        e.preventDefault();
        
        // Show loading state
        const button = e.target.closest('a');
        const originalText = button.innerHTML;
        button.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Redirecting...';
        button.style.opacity = '0.7';
        
        // Immediate redirect to login page with modal parameter
        window.location.href = "{% url 'home' %}?show_register=1";
      }
      
      // Attach event listeners to all register buttons
      const registerButtons = [
        document.getElementById('registerButton'),
        document.getElementById('mobileRegisterButton'), 
        document.getElementById('heroRegisterButton')
      ];
      
      registerButtons.forEach(button => {
        if (button) {
          button.addEventListener('click', handleRegisterClick);
        }
      });
      
      // Also handle any other register links that might not have IDs
      const otherRegisterLinks = document.querySelectorAll('a[href*="show_register=1"]');
      otherRegisterLinks.forEach(link => {
        if (!link.id) { // Only if they don't already have event listeners
          link.addEventListener('click', handleRegisterClick);
        }
      });
    })();
  </script>
</body>
</html>